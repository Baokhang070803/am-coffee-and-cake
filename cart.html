<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8"/>
    <meta name="google-site-verification" content="PaAsbmk1XWa3-fOeh2_9aTtEK38RChaUkzoLMp8MIko" />
    <meta name="description" content="Ấm - Coffee and Cake, nơi mang đến những ly cà phê thơm ngon và bánh ngọt tinh tế trong không gian ấm cúng.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="images/favicon.png">
    <title>Giỏ Hàng - Ấm - Coffee and Cake</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,500,700,500italic,100italic,100' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/flexslider.css" type="text/css" media="screen"/>
    <link href="css/sequence-looptheme.css" rel="stylesheet" media="all"/>
    <link href="css/style.css" rel="stylesheet">
    <link href="css/mobile.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999999;
        }

        .loading-content {
            text-align: center;
        }

        .loading-logo {
            width: 150px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #A67C52;
            border-radius: 50%;
            margin: 20px auto;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        body {
            font-family: 'Poppins', sans-serif;
            background: #f5f5f5;
        }
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        .auth-modal-content {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            width: 100%;
            max-width: 400px;
            position: relative;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        .auth-modal-content h2 {
            font-size: 24px;
            color: #4A2F1A;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }
        .auth-modal-content .close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            cursor: pointer;
            color: #4A2F1A;
        }
        .auth-modal-content form {
            display: flex;
            flex-direction: column;
        }
        .auth-modal-content input {
            margin-bottom: 15px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        .auth-modal-content input:focus {
            border-color: #f7544a;
            outline: none;
        }
        .auth-modal-content button {
            background: #f7544a;
            color: #fff;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .auth-modal-content button:hover {
            background: #da2a20;
        }
        .auth-modal-content .switch {
            text-align: center;
            margin-top: 10px;
        }
        .auth-modal-content .switch a {
            color: #f7544a;
            text-decoration: none;
            font-weight: 500;
        }
        .auth-modal-content .switch a:hover {
            text-decoration: underline;
        }
        .auth-modal-content .forgot-password {
            text-align: center;
            margin-top: 10px;
        }
        .auth-modal-content .forgot-password a {
            color: #f7544a;
            text-decoration: none;
            font-weight: 500;
        }
        .auth-modal-content .forgot-password a:hover {
            text-decoration: underline;
        }
        .usermenu li {
            display: inline-block;
            /* margin-right: 10px; */
        }
        .usermenu li a {
            color: #000000;
            text-decoration: none;
            /* font-weight: 500; */
        }
        .usermenu li a:hover {
            color: #A63C3C;
        }
        .loading-overlay.hidden { display: none; }
        .cart-page {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        .cart-page h3 {
            font-size: 28px;
            font-weight: 600;
            color: #4A2F1A;
            margin-bottom: 20px;
            text-align: center;
        }
        .cart-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .cart-table th, .cart-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        .cart-table th {
            background: #f8f8f8;
            font-size: 16px;
            font-weight: 600;
            color: #4A2F1A;
            text-transform: uppercase;
        }
        .cart-table td {
            font-size: 15px;
            color: #333;
        }
        .cart-table img {
            width: 60px;
            height: auto;
            border-radius: 8px;
        }
        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .quantity-control button {
            background: #f7544a;
            color: #fff;
            border: none;
            border-radius: 8px;
            width: 32px;
            height: 32px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin: 0 8px;
        }
        .quantity-control button:hover {
            background: #da2a20;
        }
        .quantity-control input {
            width: 50px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 8px;
            font-size: 15px;
        }
        .quantity-control input:focus {
            outline: none;
            border-color: #f7544a;
        }
        .coupon-section {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            justify-content: center;
        }
        .coupon-section h5 {
            font-size: 18px;
            font-weight: 500;
            color: #4A2F1A;
            margin-right: 15px;
        }
        .coupon-section input {
            width: 200px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
        }
        .coupon-section button {
            padding: 10px 20px;
            background: #f7544a;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-left: 10px;
        }
        .coupon-section button:hover {
            background: #da2a20;
        }
        .order-summary {
            margin-top: 20px;
            text-align: right;
            font-size: 16px;
            color: #333;
        }
        .order-summary p {
            margin: 8px 0;
        }
        .order-summary .coupon-applied {
            color: #28a745;
            font-weight: 600;
        }
        .order-summary strong {
            font-weight: 600;
            color: #4A2F1A;
        }
        .button-group {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }
        .checkout-button, .clear-cart-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-left: 10px;
        }
        .checkout-button {
            background: #f7544a;
            color: #fff;
        }
        .checkout-button:hover {
            background: #da2a20;
        }
        .clear-cart-button {
            background: #6c757d;
            color: #fff;
        }
        .clear-cart-button:hover {
            background: #5a6268;
        }
        .coupon-section button i, .checkout-button i, .clear-cart-button i {
            margin-right: 8px;
        }
        .cart-table th i {
            margin-right: 8px;
        }
        .coupon-section h5 i {
            margin-right: 8px;
        }
        @media (max-width: 768px) {
            .cart-table th, .cart-table td {
                font-size: 14px;
                padding: 10px;
            }
            .cart-table img {
                width: 50px;
            }
            .quantity-control button {
                width: 28px;
                height: 28px;
            }
            .quantity-control input {
                width: 40px;
                padding: 6px;
            }
            .coupon-section {
                flex-direction: column;
                align-items: flex-start;
            }
            .coupon-section h5 {
                margin-bottom: 10px;
            }
            .coupon-section input {
                width: 100%;
                margin-bottom: 10px;
            }
            .coupon-section button {
                width: 100%;
            }
            .order-summary {
                text-align: left;
            }
            .button-group {
                flex-direction: column;
                align-items: stretch;
            }
            .checkout-button, .clear-cart-button {
                margin-left: 0;
                margin-bottom: 10px;
            }
        }
        /* Spinner cho modal */
        .modal-spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2.5px solid #fff;
            border-top: 2.5px solid #f7544a;
            border-radius: 50%;
            animation: modalspin 0.7s linear infinite;
            vertical-align: middle;
        }
        @keyframes modalspin {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
        }
        /* Hiệu ứng nút bấm */
        .auth-modal-content button,
        .button {
            transition: transform 0.1s cubic-bezier(.4,0,.2,1), box-shadow 0.1s;
        }
        .auth-modal-content button:active,
        .button:active {
            transform: scale(0.96);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
    </style>
</head>
<body id="home">
    <div class="loading-overlay">
        <div class="loading-content">
            <img src="images/logo.png" alt="Ấm - Coffee and Cake" class="loading-logo">
            <p>Chờ Ấm Một chút nhé...</p>
            <div class="loading-spinner"></div>
        </div>
    </div>
    <div class="wrapper">
        <div class="header">
            <div class="container">
                <div class="row">
                    <div class="col-md-2 col-sm-2">
                        <div class="logo"><a href="index.html"><img src="images/logo.png" alt="Ấm - Coffee and Cake"></a></div>
                    </div>
                    <div class="col-md-10 col-sm-10">
                        <div class="header_top">
                            <div class="row">
                                <div class="col-md-3">
                                </div>
                                <div class="col-md-6">
                                    <ul class="topmenu">
                                        <li><a href="policy.html">Chính Sách</a></li>
                                        <li><a href="member.html">Thành Viên</a></li>
                                     </ul>
                                </div>
                                <div class="col-md-3">
                                    <ul class="usermenu">
                                        <li id="loginLink"><a href="#" class="log"><i class="fa fa-sign-in"></i> Đăng Nhập</a></li>
                                        <li id="registerLink"><a href="#" class="reg"><i class="fa fa-user-plus"></i> Đăng Ký</a></li>
                                        <li id="userInfo" style="display: none;"><a href="#" id="logoutLink"><i class="fa fa-sign-out"></i> Đăng Xuất</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="header_bottom">
                            <ul class="option">
                                <li id="search" class="search">
                                    <form><input class="search-submit" type="submit" value=""><input class="search-input" placeholder="Tìm kiếm đồ uống, bánh ngọt..." type="text" value="" name="search"></form>
                                </li>
                                <li class="option-cart">
                                    <a href="cart.html" class="cart-icon">Giỏ Hàng <span class="cart_no">0</span></a>
                                    <!-- <ul class="option-cart-item"></ul> -->
                                </li>
                            </ul>
                            <div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div>
                            <div class="navbar-collapse collapse">
                                <ul class="nav navbar-nav">
                                    <li>
                                        <a href="index.html">Trang Chủ</a>
                                    </li>
                                    <li><a href="menu.html">Menu</a></li>
                                    <li><a href="news.html">Tin Tức, Khuyến Mãi & Sự Kiện</a></li>
                                    <li><a href="about.html">Về Chúng Tôi</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
        <div class="hom-slider">
            <div class="container">
                <div id="sequence">
                    <div class="sequence-prev"><i class="fa fa-angle-left"></i></div>
                    <div class="sequence-next"><i class="fa fa-angle-right"></i></div>
                    <ul class="sequence-canvas">
                        <li class="animate-in">
                            <div class="flat-caption caption1 formLeft delay300 text-center"><span class="suphead">Ấm - Coffee and Cake</span></div>
                            <div class="flat-caption caption2 formLeft delay400 text-center">
                                <h1>Chào Mừng Đến Với Không Gian Ấm Áp</h1>
                            </div>
                            <div class="flat-button caption4 formLeft delay600 text-center"><a class="more" href="menu-drinks.html">Xem Menu</a></div>
                            <div class="flat-image formBottom delay200" data-duration="5" data-bottom="true"><img src="images/khonggian.png" alt=""></div>
                        </li>
                        <li>
                            <div class="flat-caption caption2 formLeft delay400">
                                <h1>Khuyến Mãi Đặc Biệt</h1>
                            </div>   
                            <div class="flat-caption caption3 formLeft delay500">
                                <h2>Mua 1 tặng 1 cho tất cả đồ uống<br>Chỉ trong tuần này!</h2>
                            </div>
                            <div class="flat-button caption5 formLeft delay600"><a class="more" href="promotions.html">Xem Chi Tiết</a></div>
                            <div class="flat-image formBottom delay200" data-bottom="true"><img src="images/khuyenmai.png" alt=""></div>
                        </li>
                        <li>
                            <div class="flat-caption caption2 formLeft delay400 text-center">
                                <h1>Bánh Ngọt Tươi Mới</h1>
                            </div>
                            <div class="flat-caption caption3 formLeft delay500 text-center">
                                <p>Khám phá bộ sưu tập bánh ngọt mới nhất của chúng tôi<br>Được làm thủ công mỗi ngày!</p>
                            </div>
                            <div class="flat-button caption4 formLeft delay600 text-center"><a class="more" href="menu-cakes.html">Thử Ngay</a></div>
                            <div class="flat-image formBottom delay200" data-bottom="true"><img src="images/banhngot.png" alt=""></div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="promotion-banner">
                <div class="container">
                    <div class="row">
                        <div class="col-md-4 col-sm-4 col-xs-4">
                            <div class="promo-box"><a href="event.html"><img src="images/promotion-01.png" alt="Cà Phê"></a></div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-xs-4">
                            <div class="promo-box"><a href="event.html"><img src="images/promotion-02.png" alt="Bánh Ngọt"></a></div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-xs-4">
                            <div class="promo-box"><a href="event.html"><img src="images/promotion-03.png" alt="Khuyến Mãi"></a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
        <div class="container_fullwidth">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <div class="special-deal leftbar" style="margin-top:0;">
                            <h4 class="title">Ưu Đãi <strong>Đặc Biệt</strong></h4>
                            <div class="special-item">
                                <div class="product-image"><a href="details.html"><img src="https://img.freepik.com/free-photo/cup-coffee-with-heart-drawn-foam_1286-70.jpg?uid=R62207786&ga=GA1.1.635552943.1743728016&semt=ais_hybrid&w=740" alt="Cappuccino"></a></div>
                                <div class="product-info">
                                    <p><a href="details.html">Cappuccino</a></p>
                                    <h5 class="price">45.000 VND</h5>
                                </div>
                            </div>
                            <div class="special-item">
                                <div class="product-image"><a href="details.html"><img src="https://img.freepik.com/free-photo/front-view-red-cake-slice-fruit-cake-piece-inside-plate-with-fresh-strawberries-grey_140725-20811.jpg?uid=R195732581&ga=GA1.1.557169778.1744386169&semt=ais_hybrid&w=740" alt="Bánh Red Velvet"></a></div>
                                <div class="product-info">
                                    <p><a href="details.html">Bánh Red Velvet</a></p>
                                    <h5 class="price">55.000 VND</h5>
                                </div>
                            </div>
                            <div class="special-item">
                                <div class="product-image"><a href="details.html"><img src="https://img.freepik.com/free-photo/tiramisu-cake-with-cacao-powder-top-served-with-tea_140725-8829.jpg?uid=R62207786&ga=GA1.1.635552943.1743728016&semt=ais_hybrid&w=740" alt="Tiramisu"></a></div>
                                <div class="product-info">
                                    <p><a href="details.html">Tiramisu</a></p>
                                    <h5 class="price">65.000 VND</h5>
                                </div>
                            </div>
                        </div>
                        <div class="product-tag leftbar">
                            <h3 class="title">Thẻ <strong>Sản Phẩm</strong></h3>
                            <ul>
                                <li><a href="#">Cà Phê</a></li>
                                <li><a href="#">Bánh Ngọt</a></li>
                                <li><a href="#">Latte</a></li>
                                <li><a href="#">Cheesecake</a></li>
                                <li><a href="#">Tiramisu</a></li>
                                <li><a href="#">Mousse Cake</a></li>
                            </ul>
                        </div>
                        <div class="get-newsletter leftbar">
                            <h3 class="title">Đăng Ký <strong>Bản Tin</strong></h3>
                            <p>Nhận thông tin mới nhất về ưu đãi và sản phẩm từ Đặt Bánh.</p>
                            <form>
                                <input class="email" type="email" name="email" placeholder="Email của bạn...">
                                <input class="submit" type="submit" value="Gửi">
                            </form>
                        </div>
                        <div class="fbl-box leftbar">
                            <h3 class="title">Facebook</h3>
                            <span class="likebutton"><a href="#"><img src="images/fblike.png" alt="Thích trang"></a></span>
                            <p>12k người thích Đặt Bánh - Coffee and Cake.</p>
                            <div class="fbplug"><a href="#"><span><img src="images/fbicon.png" alt="Facebook"></span>Plugin mạng xã hội Facebook</a></div>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="cart-page">
                            <h3>Giỏ Hàng</h3>
                            <table class="cart-table" id="cart-items">
                                <thead>
                                    <tr>
                                        <th><i class="fa fa-image"></i> Hình Ảnh</th>
                                        <th><i class="fa fa-coffee"></i> Sản Phẩm</th>
                                        <th><i class="fa fa-sort-numeric-up"></i> Số Lượng</th>
                                        <th><i class="fa fa-money"></i> Giá</th>
                                        <th><i class="fa fa-calculator"></i> Tổng</th>
                                    </tr>
                                </thead>
                                <tbody id="cart-items-body"></tbody>
                            </table>
                            <div class="coupon-section">
                                <h5><i class="fa fa-ticket"></i> Áp Dụng Mã Giảm Giá</h5>
                                <input type="text" id="coupon-code" placeholder="Nhập mã giảm giá">
                                <button onclick="applyCoupon()"><i class="fa fa-check-circle"></i> Áp Dụng</button>
                            </div>
                            <div class="order-summary">
                                <p><strong>Mã Giảm Giá:</strong> <span id="cart-coupon">Không áp dụng</span></p>
                                <p><strong>Tạm Tính:</strong> <span id="cart-subtotal">0 VND</span></p>
                                <p><strong>Giảm Giá:</strong> <span id="cart-discount">0 VND</span></p>
                                <p><strong>Tổng Số Tiền:</strong> <span id="cart-grandtotal">0 VND</span></p>
                            </div>
                            <div class="button-group">
                                <button class="checkout-button" onclick="proceedToCheckout()"><i class="fa fa-shopping-cart"></i> Thanh Toán</button>
                                <button class="clear-cart-button" onclick="clearCart()"><i class="fa fa-trash"></i> Xóa Đơn Hàng</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="our-brand">
                    <h3 class="title"><strong>Đối Tác</strong> Của Chúng Tôi</h3>
                    <div class="control">
                        <a id="prev_brand" class="prev" href="#"><</a>
                        <a id="next_brand" class="next" href="#">></a>
                    </div>
                    <ul id="braldLogo">
                        <li>
                            <ul class="brand_item">
                                <li><a href="#"><div class="brand-logo"><img src="images/Highlands_Coffee_logo.svg.png" alt=""></div></a></li>
                                <li><a href="#"><div class="brand-logo"><img src="images/logo-phuc-long-coffee-and-tea-300x225.webp" alt=""></div></a></li>
                                <li><a href="#"><div class="brand-logo"><img src="images/Starbucks_Corporation_Logo_2011.svg.png" alt=""></div></a></li>
                                <li><a href="#"><div class="brand-logo"><img src="images/TOUSlesJOURSnewlogo.jpg" alt=""></div></a></li>
                                <li><a href="#"><div class="brand-logo"><img src="images/vina.jpg" alt=""></div></a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
        <div class="footer">
            <div class="footer-info">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="footer-logo"><a href="index.html"><img src="images/LOGO.png" alt="Ấm - Coffee and Cake"></a></div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <h4 class="title">Thông Tin <strong>Liên Hệ</strong></h4>
                            <p>Số 123, Nguyễn Trãi, Quận 5, TP. Hồ Chí Minh</p>
                            <p>Hotline: (028) 1234 5678</p>
                            <p>Email: contact@amcoffee.vn</p>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <h4 class="title">Hỗ Trợ <strong>Khách Hàng</strong></h4>
                            <ul class="support">
                                <li><a href="policy.html#faq">Câu Hỏi Thường Gặp</a></li>
                                <li><a href="policy.html#payment">Phương Thức Thanh Toán</a></li>
                                <li><a href="policy.html#delivery">Giao Hàng</a></li>
                                <li><a href="policy.html#returns">Đổi Trả</a></li>
                            </ul>
                        </div>
                        <div class="col-md-3">
                            <h4 class="title">Đăng Ký <strong>Bản Tin</strong></h4>
                            <p>Nhận ưu đãi và tin tức mới nhất từ Ấm!</p>
                            <form class="newsletter">
                                <input type="email" name="email" placeholder="Nhập email của bạn...">
                                <input type="submit" value="Đăng Ký" class="button">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright-info">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <p>Copyright © 2025. Thiết kế bởi <a href="#">Ấm - Coffee and Cake</a>. Bản quyền thuộc về chúng tôi.</p>
                        </div>
                        <div class="col-md-6">
                            <ul class="social-icon2">
                                <li><a href="#" class="facebook"><i class="fa fa-facebook"></i></a></li>
                                <li><a href="#" class="instagram"><i class="fa fa-instagram"></i></a></li>
                                <li><a href="#" class="youtube"><i class="fa fa-youtube"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="loginModal" class="auth-modal">
            <div class="auth-modal-content">
                <span class="close">×</span>
                <h2>Đăng Nhập</h2>
                <form id="loginForm">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="Mật khẩu" required>
                    <button type="submit" id="loginBtn">
                        Đăng Nhập
                        <span class="modal-spinner" id="loginSpinner" style="display:none;margin-left:8px;"></span>
                    </button>
                </form>
                <div class="switch">
                    Chưa có tài khoản? <a href="#" id="switchToRegister">Đăng Ký</a>
                </div>
                <div class="forgot-password">
                    <a href="#" id="forgotPassword">Quên mật khẩu?</a>
                </div>
            </div>
        </div>
        <div id="registerModal" class="auth-modal">
            <div class="auth-modal-content">
                <span class="close">×</span>
                <h2>Đăng Ký</h2>
                <form id="registerForm">
                    <input type="text" id="registerName" placeholder="Họ và Tên" required>
                    <input type="email" id="registerEmail" placeholder="Email" required>
                    <input type="password" id="registerPassword" placeholder="Mật khẩu" required>
                    <button type="submit" id="registerBtn">
                        Đăng Ký
                        <span class="modal-spinner" id="registerSpinner" style="display:none;margin-left:8px;"></span>
                    </button>
                </form>
                <div class="switch">
                    Đã có tài khoản? <a href="#" id="switchToLogin">Đăng Nhập</a>
                </div>
            </div>
        </div>
        <div id="forgotPasswordModal" class="auth-modal">
            <div class="auth-modal-content">
                <span class="close">×</span>
                <h2>Quên Mật Khẩu</h2>
                <form id="forgotPasswordForm">
                    <input type="email" id="forgotPasswordEmail" placeholder="Email" required>
                    <button type="submit" id="forgotBtn">
                        Gửi Yêu Cầu
                        <span class="modal-spinner" id="forgotSpinner" style="display:none;margin-left:8px;"></span>
                    </button>
                </form>
                <div class="switch">
                    Quay lại <a href="#" id="switchToLoginFromForgot">Đăng Nhập</a>
                </div>
            </div>
        </div>

        <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/jquery.sequence-min.js"></script>
        <script type="text/javascript" src="js/jquery.carouFredSel-6.2.1-packed.js"></script>
        <script defer src="js/jquery.flexslider.js"></script>
        <script type="text/javascript" src="js/script.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
        <script>
            // Khởi tạo Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyA5NhPnsfXEUbXYzkdB5kvfaE0swtViJaI",
                authDomain: "coffee-and-cake-e2f5d.firebaseapp.com",
                databaseURL: "https://coffee-and-cake-e2f5d-default-rtdb.asia-southeast1.firebasedatabase.app",
                projectId: "coffee-and-cake-e2f5d",
                storageBucket: "coffee-and-cake-e2f5d.appspot.com",
                messagingSenderId: "453243002159",
                appId: "1:453243002159:web:074baa5652ed789ecbd5da",
                measurementId: "G-1H7DM8MQCV"
            };
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.database();

            document.addEventListener('DOMContentLoaded', () => {
                console.log("Trang cart.html đã tải xong");

                // Kiểm tra trạng thái đăng nhập và lấy thông tin người dùng
                auth.onAuthStateChanged((user) => {
                    console.log("Trạng thái đăng nhập:", user ? "Đã đăng nhập" : "Chưa đăng nhập");
                    const loginLink = document.getElementById('loginLink');
                    const registerLink = document.getElementById('registerLink');
                    const userInfo = document.getElementById('userInfo');

                    if (user) {
                        userInfo.style.display = 'inline-block';
                        loginLink.style.display = 'none';
                        registerLink.style.display = 'none';
                    } else {
                        userInfo.style.display = 'none';
                        loginLink.style.display = 'inline-block';
                        registerLink.style.display = 'inline-block';
                    }
                });

                // Cập nhật dropdown menu và giỏ hàng
                loadDropdownMenu();
                updateCartCount();
                updateCartDropdown();
                updateCartDetails();

                // Xử lý modal đăng nhập/đăng ký
                bindModalEvents();

                // Xử lý form đăng nhập
                document.getElementById('loginForm').addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const email = document.getElementById('loginEmail').value;
                    const password = document.getElementById('loginPassword').value;
                    const btn = document.getElementById('loginBtn');
                    const spinner = document.getElementById('loginSpinner');
                    btn.disabled = true;
                    spinner.style.display = 'inline-block';
                    try {
                        await auth.signInWithEmailAndPassword(email, password);
                        Swal.fire({
                            icon: 'success',
                            title: 'Đăng nhập thành công!',
                            showConfirmButton: false,
                            timer: 1500
                        });
                        document.getElementById('loginModal').style.display = 'none';
                    } catch (error) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Lỗi!',
                            text: error.code === 'auth/wrong-password' ? 'Mật khẩu không đúng.' : error.code === 'auth/user-not-found' ? 'Tài khoản không tồn tại.' : 'Đã có lỗi xảy ra. Vui lòng thử lại.',
                            showConfirmButton: true
                        });
                    }
                    btn.disabled = false;
                    spinner.style.display = 'none';
                });

                // Xử lý form đăng ký
                document.getElementById('registerForm').addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const name = document.getElementById('registerName').value;
                    const email = document.getElementById('registerEmail').value;
                    const password = document.getElementById('registerPassword').value;
                    const btn = document.getElementById('registerBtn');
                    const spinner = document.getElementById('registerSpinner');
                    btn.disabled = true;
                    spinner.style.display = 'inline-block';
                    try {
                        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                        await userCredential.user.updateProfile({ displayName: name });
                        await auth.sendEmailVerification(userCredential.user);
                        await db.ref('users/' + userCredential.user.uid).set({
                            fullName: name,
                            email: email,
                            membership: 'Thành viên hạng đồng'
                        });
                        Swal.fire({
                            icon: 'success',
                            title: 'Đăng ký thành công!',
                            text: 'Vui lòng kiểm tra email để xác nhận tài khoản.',
                            showConfirmButton: true
                        });
                        document.getElementById('registerModal').style.display = 'none';
                    } catch (error) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Lỗi!',
                            text: error.code === 'auth/email-already-in-use' ? 'Email đã được sử dụng.' : 'Đã có lỗi xảy ra. Vui lòng thử lại.',
                            showConfirmButton: true
                        });
                    }
                    btn.disabled = false;
                    spinner.style.display = 'none';
                });

                // Xử lý form quên mật khẩu
                document.getElementById('forgotPasswordForm').addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const email = document.getElementById('forgotPasswordEmail').value;
                    const btn = document.getElementById('forgotBtn');
                    const spinner = document.getElementById('forgotSpinner');
                    btn.disabled = true;
                    spinner.style.display = 'inline-block';
                    if (!email) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Lỗi!',
                            text: 'Vui lòng nhập email để đặt lại mật khẩu.'
                        });
                        btn.disabled = false;
                        spinner.style.display = 'none';
                        return;
                    }
                    try {
                        await auth.sendPasswordResetEmail(email);
                        Swal.fire({
                            icon: 'success',
                            title: 'Thành công!',
                            text: 'Email đặt lại mật khẩu đã được gửi. Vui lòng kiểm tra hộp thư của bạn.',
                            showConfirmButton: true
                        });
                        document.getElementById('forgotPasswordModal').style.display = 'none';
                    } catch (error) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Lỗi!',
                            text: error.code === 'auth/user-not-found' ? 'Email không tồn tại.' : 'Đã có lỗi xảy ra. Vui lòng thử lại.',
                            showConfirmButton: true
                        });
                    }
                    btn.disabled = false;
                    spinner.style.display = 'none';
                });

                // Xử lý đăng xuất
                document.getElementById('logoutLink').addEventListener('click', async (e) => {
                    e.preventDefault();
                    Swal.fire({
                        title: 'Bạn có chắc?',
                        text: "Bạn muốn đăng xuất khỏi hệ thống?",
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#A63C3C',
                        cancelButtonColor: '#6c757d',
                        confirmButtonText: 'Đăng Xuất',
                        cancelButtonText: 'Hủy'
                    }).then(async (result) => {
                        if (result.isConfirmed) {
                            try {
                                await auth.signOut();
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Đăng xuất thành công!',
                                    showConfirmButton: false,
                                    timer: 1500
                                });
                            } catch (error) {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Lỗi!',
                                    text: 'Đã có lỗi xảy ra khi đăng xuất. Vui lòng thử lại.',
                                    showConfirmButton: true
                                });
                            }
                        }
                    });
                });
            });

            // Ẩn loading overlay
            window.addEventListener('load', function() {
                setTimeout(() => {
                    const loadingOverlay = document.querySelector('.loading-overlay');
                    if (loadingOverlay) {
                        loadingOverlay.classList.add('hidden');
                    }
                }, 1000);
            });

            // Cập nhật dropdown menu
            function loadDropdownMenu() {
                console.log("Cập nhật dropdown menu");
                const dropdownDrinks = document.getElementById('dropdown-drinks');
                const dropdownCakes = document.getElementById('dropdown-cakes');
                const dropdownToppings = document.getElementById('dropdown-toppings');

                if (!dropdownDrinks || !dropdownCakes || !dropdownToppings) return;

                dropdownDrinks.innerHTML = '';
                dropdownCakes.innerHTML = '';
                dropdownToppings.innerHTML = '';

                const drinks = ['Cà Phê Đen Đá', 'Cappuccino', 'Latte', 'Espresso'];
                const cakes = ['Bánh Bông Lan', 'Cheesecake', 'Bánh Mì', 'Tiramisu', 'Mousse Cake', 'Cupcake'];
                const toppings = ['Phô Mai', 'Socola', 'Mật Ong', 'Kem', 'Trái Cây'];

                drinks.forEach(item => dropdownDrinks.innerHTML += `<li><a href="menu.html">${item}</a></li>`);
                cakes.forEach(item => dropdownCakes.innerHTML += `<li><a href="menu.html">${item}</a></li>`);
                toppings.forEach(item => dropdownToppings.innerHTML += `<li><a href="menu.html#${item.toLowerCase().replace(/\s/g, '-')}"">${item}</a></li>`);
            }

            // Cập nhật số lượng giỏ hàng
            function updateCartCount() {
                console.log("Cập nhật số lượng giỏ hàng");
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const count = cart.reduce((sum, item) => sum + (Number(item.quantity) || 0), 0);
                const cartNo = document.querySelector('.cart_no');
                if (cartNo) cartNo.textContent = count;
            }

            // Cập nhật dropdown giỏ hàng
            function updateCartDropdown() {
                console.log("Cập nhật dropdown giỏ hàng");
                const dropdown = document.querySelector('.option-cart-item');
                if (!dropdown) return;

                dropdown.innerHTML = '';
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                let products = JSON.parse(localStorage.getItem('products')) || [];

                if (cart.length === 0) {
                    dropdown.innerHTML = '<li>Giỏ hàng trống!</li>';
                    return;
                }

                cart.forEach(item => {
                    const product = products.find(p => p.id === item.productId);
                    if (!product) return;

                    let cartItem = document.createElement('li');
                    cartItem.classList.add('cart-item');
                    cartItem.innerHTML = `
                        <div class="cart-item">
                            <div class="image"><img src="${product.image}" alt="${product.name}" loading="lazy"></div>
                            <div class="item-description">
                                <p class="name">${product.name}</p>
                                <p>Số lượng: <span class="light-red">${item.quantity}</span></p>
                            </div>
                            <div class="right">
                                <p class="price">${(product.price * item.quantity).toLocaleString('vi-VN')} VND</p>
                            </div>
                        </div>
                    `;
                    dropdown.appendChild(cartItem);
                });

                let totalPrice = cart.reduce((total, item) => {
                    let product = products.find(p => p.id === item.productId);
                    return total + (product ? product.price * item.quantity : 0);
                }, 0);
                let totalLi = document.createElement('li');
                totalLi.innerHTML = `<span class="total">Tổng <strong>${totalPrice.toLocaleString('vi-VN')} VND</strong></span><button class="checkout" onclick="window.location.href='checkout.html?step=1'">Thanh Toán</button>`;
                dropdown.appendChild(totalLi);
            }

            // Xóa toàn bộ giỏ hàng
            function clearCart() {
                Swal.fire({
                    title: 'Bạn có chắc?',
                    text: "Bạn muốn xóa toàn bộ đơn hàng?",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#A63C3C',
                    cancelButtonColor: '#6c757d',
                    confirmButtonText: 'Xóa',
                    cancelButtonText: 'Hủy'
                }).then((result) => {
                    if (result.isConfirmed) {
                        localStorage.setItem('cart', JSON.stringify([]));
                        localStorage.removeItem('appliedCoupon');
                        updateCartCount();
                        updateCartDropdown();
                        updateCartDetails();
                        Swal.fire({
                            icon: 'success',
                            title: 'Đã xóa!',
                            text: 'Đơn hàng đã được xóa.',
                            showConfirmButton: false,
                            timer: 1500
                        });
                    }
                });
            }

            // Cập nhật số lượng sản phẩm
            function updateQuantity(productId, newQuantity) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                const itemIndex = cart.findIndex(item => item.productId === productId);
                if (itemIndex !== -1) {
                    if (newQuantity <= 0) {
                        cart.splice(itemIndex, 1); // Xóa sản phẩm nếu số lượng <= 0
                    } else {
                        cart[itemIndex].quantity = newQuantity;
                    }
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartCount();
                    updateCartDropdown();
                    updateCartDetails();
                }
            }

            // Lấy danh sách khuyến mãi từ Firebase
            async function fetchPromotions() {
                try {
                    const promotionsRef = db.ref('promotions');
                    const snapshot = await promotionsRef.once('value');
                    return snapshot.val() || {};
                } catch (error) {
                    console.error("Lỗi khi lấy dữ liệu khuyến mãi:", error);
                    return {};
                }
            }

            // Kiểm tra tính hợp lệ của mã giảm giá
            function isValidPromotion(promo, code) {
                if (!promo || promo.status !== 'active') return false;
                if (promo.code !== code) return false;
                const today = new Date();
                const startDate = new Date(promo.startDate);
                const endDate = new Date(promo.endDate);
                return today >= startDate && today <= endDate;
            }

            // Áp dụng mã giảm giá
            async function applyCoupon() {
                const code = document.getElementById('coupon-code').value.trim();
                if (!code) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Lỗi!',
                        text: 'Vui lòng nhập mã giảm giá.',
                        showConfirmButton: true
                    });
                    return;
                }

                const promotions = await fetchPromotions();
                const promo = Object.values(promotions).find(p => p.code === code);

                if (isValidPromotion(promo, code)) {
                    localStorage.setItem('appliedCoupon', JSON.stringify({ code: code }));
                    Swal.fire({
                        icon: 'success',
                        title: 'Thành công!',
                        text: `Mã giảm giá ${code} (${promo.discount}%) đã được áp dụng.`,
                        showConfirmButton: false,
                        timer: 1500
                    });
                } else {
                    localStorage.removeItem('appliedCoupon');
                    Swal.fire({
                        icon: 'error',
                        title: 'Lỗi!',
                        text: 'Mã giảm giá không hợp lệ hoặc đã hết hạn.',
                        showConfirmButton: true
                    });
                }
                updateCartDetails();
            }

            // Cập nhật chi tiết giỏ hàng
            async function updateCartDetails() {
                console.log("Cập nhật chi tiết giỏ hàng");
                const tbody = document.getElementById('cart-items-body');
                if (!tbody) {
                    console.error("Không tìm thấy cart-items-body");
                    Swal.fire({
                        icon: 'error',
                        title: 'Lỗi!',
                        text: 'Không tìm thấy bảng hiển thị giỏ hàng.',
                        showConfirmButton: true
                    });
                    return;
                }

                tbody.innerHTML = '';
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                let products = JSON.parse(localStorage.getItem('products')) || [];
                let subtotal = 0;

                if (cart.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="5">Giỏ hàng trống!</td></tr>';
                    document.getElementById('cart-subtotal').textContent = '0 VND';
                    document.getElementById('cart-discount').textContent = '0 VND';
                    document.getElementById('cart-grandtotal').textContent = '0 VND';
                    document.getElementById('cart-coupon').textContent = 'Không áp dụng';
                    return;
                }

                cart.forEach(item => {
                    const product = products.find(p => p.id === item.productId);
                    if (!product) {
                        console.error("Không tìm thấy sản phẩm:", item.productId);
                        return;
                    }

                    const price = Number(product.price);
                    const quantity = Number(item.quantity);
                    if (isNaN(price) || isNaN(quantity)) {
                        console.error("Giá hoặc số lượng không hợp lệ:", product);
                        return;
                    }

                    const itemTotal = price * quantity;
                    subtotal += itemTotal;

                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><img src="${product.image}" alt="${product.name}"></td>
                        <td>${product.name}</td>
                        <td>
                            <div class="quantity-control">
                                <button onclick="updateQuantity('${product.id}', ${quantity - 1})">−</button>
                                <input type="number" value="${quantity}" min="1" onchange="updateQuantity('${product.id}', this.value)">
                                <button onclick="updateQuantity('${product.id}', ${quantity + 1})">+</button>
                            </div>
                        </td>
                        <td>${price.toLocaleString('vi-VN')} VND</td>
                        <td>${itemTotal.toLocaleString('vi-VN')} VND</td>
                    `;
                    tbody.appendChild(row);
                });

                let appliedCoupon = JSON.parse(localStorage.getItem('appliedCoupon')) || {};
                let discount = 0;
                let couponText = 'Không áp dụng';

                if (appliedCoupon.code) {
                    const promotions = await fetchPromotions();
                    const promo = Object.values(promotions).find(p => p.code === appliedCoupon.code);
                    if (isValidPromotion(promo, appliedCoupon.code)) {
                        discount = (subtotal * promo.discount) / 100;
                        couponText = `<span class="coupon-applied">${appliedCoupon.code} (${promo.discount}%)</span>`;
                    } else {
                        localStorage.removeItem('appliedCoupon');
                    }
                }

                let grandtotal = subtotal - discount;

                document.getElementById('cart-subtotal').textContent = `${subtotal.toLocaleString('vi-VN')} VND`;
                document.getElementById('cart-discount').textContent = `${discount.toLocaleString('vi-VN')} VND`;
                document.getElementById('cart-grandtotal').textContent = `${grandtotal.toLocaleString('vi-VN')} VND`;
                document.getElementById('cart-coupon').innerHTML = couponText;
            }

            // Xử lý modal đăng nhập/đăng ký
            function bindModalEvents() {
                console.log("Gắn sự kiện modal");
                document.querySelector('.log').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('loginModal').style.display = 'flex';
                });

                document.querySelector('.reg').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('registerModal').style.display = 'flex';
                });

                document.getElementById('forgotPassword').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('loginModal').style.display = 'none';
                    document.getElementById('forgotPasswordModal').style.display = 'flex';
                });

                document.getElementById('switchToRegister').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('loginModal').style.display = 'none';
                    document.getElementById('registerModal').style.display = 'flex';
                });

                document.getElementById('switchToLogin').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('registerModal').style.display = 'none';
                    document.getElementById('loginModal').style.display = 'flex';
                });

                document.getElementById('switchToLoginFromForgot').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('forgotPasswordModal').style.display = 'none';
                    document.getElementById('loginModal').style.display = 'flex';
                });

                document.querySelectorAll('.auth-modal .close').forEach(closeBtn => {
                    closeBtn.addEventListener('click', () => {
                        document.getElementById('loginModal').style.display = 'none';
                        document.getElementById('registerModal').style.display = 'none';
                        document.getElementById('forgotPasswordModal').style.display = 'none';
                    });
                });

                document.querySelectorAll('.auth-modal').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            modal.style.display = 'none';
                        }
                    });
                });
            }

            // Kiểm tra giỏ hàng trước khi chuyển hướng
            function proceedToCheckout() {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                if (cart.length === 0) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Lỗi!',
                        text: 'Giỏ hàng trống! Vui lòng thêm sản phẩm trước khi thanh toán.',
                        showConfirmButton: true
                    });
                    return;
                }
                window.location.href = 'checkout.html?step=1';
            }

            // Kiểm tra carouFredSel
            $(document).ready(() => {
                console.log("jQuery đã sẵn sàng");
                const selectors = ['#featured', '#hot', '#gallery_01'];
                selectors.forEach(selector => {
                    if (!$(selector).length) {
                        console.log(`No ${selector} element found, skipping carouFredSel`);
                    }
                });
            });
        </script>
                   <!-- Bottom Navigation Bar cho mobile -->
                   <div class="bottom-nav">
                    <a href="index.html" class="nav-home"><i class="fa fa-home"></i><span></span>Trang chủ</span></a>
                    <a href="news.html" class="nav-news"><i class="fa fa-file-text-o"></i><span>Tin tức</span></a>
                    <a href="menu.html" class="nav-account"><i class="fa fa-coffee"></i><span>Menu</span></a>
                    <a href="cart.html" class="nav-cart"><i class="fa fa-shopping-cart"></i><span>Giỏ hàng</span></a>
                    <a href="policy.html" class="nav-policy"><i class="fa fa-file-text-o"></i><span>Chính sách</span></a>
                    <a href="about.html" class="nav-about"><i class="fa fa-info-circle"></i><span>Giới thiệu</span></a>
                  </div>
              
                  <div class="appbar-mobile">
                    <div class="appbar-left">
                      <a href="index.html"><img src="images/logo.png" alt="Ấm" class="appbar-logo"></a>
                    </div>
                    <div class="appbar-title">Ấm Coffee & Cake</div>
                    <div class="appbar-right">
                      <a href="member.html" class="appbar-account"><i class="fa fa-user"></i></a>
                    </div>
                  </div>
</body>
</html>